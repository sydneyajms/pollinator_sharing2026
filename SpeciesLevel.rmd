---
title: "Untitled"
output: html_document
date: "2026-02-22"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyr)
library(dplyr)
library(bipartite)
library(ggplot2)
library(ggeffects)
library(ggrepel)
```



```{r cars}
# find species level characteristics (by species for every block/plot)
PSI_val <- sapply(plist, specieslevel, level = "both", index = "PSI")
degree_val <- lapply(plist, specieslevel, level = "higher", index = "degree")

# create empty matrix 

allpolls <- unique(pollinators$Genus)
allplants <- unique(pollinators$sp)
allsp <- c(allpolls, allplants)
BP <- unique(pollinators$BP)
bigmat <- matrix(NA, nrow = length(plist), ncol = length(allsp), dimnames = list(BP, allsp))

for (i in names(plist)) {
  degree <- specieslevel(plist[[i]], level = "both", index = "degree")
  polls1 <- unlist(degree$`higher level`)
  plants1 <- unlist(degree$`lower level`)
  bigmat[i,rownames(polls1)] <- polls1
  bigmat[i,rownames(plants1)] <- plants1
}



```
